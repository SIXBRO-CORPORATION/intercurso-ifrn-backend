[build-system]
requires = ["setuptools>=68"]
build-backend = "setuptools.build_meta"

[project]
name = "intercurso-ifrn-backend"
version = "0.1.0"
description = "Backend do Intercurso IFRN"
readme = "README.md"
requires-python = ">=3.12"

dependencies = [
    "fastapi==0.115.0",
    "uvicorn[standard]==0.32.0",

    "sqlalchemy[asyncio]==2.0.43",
    "asyncpg==0.29.0",

    "httpx>=0.28.1",
    "pyjwt>=2.10.1",
    "python-jose>=3.3.0",

    "pydantic==2.10.0",
    "pydantic-settings>=2.0.0",
]

[dependency-groups]
dev = [
    "pytest==9.0.2",
    "ruff>=0.14.10",
    "taskipy>=1.14.1",
    "aiosqlite==0.20.0",
    "python-dotenv==1.1.0",
]

[tool.setuptools.packages.find]
where = ["."]

[tool.taskipy.tasks]

# ğŸ”¥ Ambiente
install = "uv venv && uv pip install . && uv pip install --group dev"

# ğŸš€ AplicaÃ§Ã£o
run = "uv run uvicorn web.main:app --reload"

# ğŸ§ª Testes
test = "uv run pytest"
test_unit = "uv run pytest tests/unit"
test_integration = "uv run pytest tests/integration"
test_e2e = "uv run pytest tests/e2e"

# ğŸ“Š Cobertura
coverage = "uv run pytest --cov=core --cov=domain --cov=business --cov=security --cov=persistence --cov-report=term-missing"

# ğŸ§¹ Qualidade de cÃ³digo
lint = "uv run ruff check ."

# ğŸ” Tudo de uma vez (local / CI)
check = "task lint && task test"

# ğŸ§¨ Limpeza
clean = "rm -rf .venv .pytest_cache .ruff_cache dist build *.egg-info"
